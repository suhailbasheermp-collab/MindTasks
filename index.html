<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mind & Tasks</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#0b0c15">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;1,300&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-deep: #050508;
            --text-main: #e0e0e0;
            --text-muted: rgba(255, 255, 255, 0.5);
            --gold: #d4af37;
            --gold-glow: rgba(212, 175, 55, 0.3);
            --mystic-purple: #4b0082;
            --mystic-blue: #191970;
            --red: #8B0000; --yellow: #B8860B; --green: #2F4F4F;
            --font-serif: 'Merriweather', serif;
            --font-ui: 'Rajdhani', sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; font-family: var(--font-ui); background-color: var(--bg-deep); color: var(--text-main); min-height: 100vh; overflow-x: hidden; }

        /* AURORA */
        .aurora-bg { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1; background: radial-gradient(circle at 50% 50%, #0a0a10 0%, #000000 100%); overflow: hidden; }
        .aurora-blob { position: absolute; filter: blur(90px); opacity: 0.3; animation: float 20s infinite ease-in-out alternate; }
        .blob-1 { top: -10%; left: -10%; width: 60vw; height: 60vw; background: var(--mystic-purple); animation-duration: 25s; }
        .blob-2 { bottom: -10%; right: -10%; width: 60vw; height: 60vw; background: var(--mystic-blue); animation-duration: 30s; }
        .blob-3 { top: 40%; left: 30%; width: 50vw; height: 50vw; background: var(--gold); opacity: 0.15; animation-duration: 22s; }
        @keyframes float { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(20px, 40px) scale(1.1); } }

        /* FIREFLIES */
        .firefly-container { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events: none; z-index: 999; display: none; }
        .firefly-container.active { display: block; }
        .firefly { position: absolute; width: 3px; height: 3px; background: #ffd700; border-radius: 50%; box-shadow: 0 0 15px #ffd700, 0 0 30px orange; opacity: 0; animation: fly 8s infinite ease-in-out; }
        @keyframes fly { 0% { transform: translate(0,0) scale(0.5); opacity: 0; } 20% { opacity: 1; } 80% { opacity: 1; } 100% { transform: translate(var(--moveX), var(--moveY)) scale(0.5); opacity: 0; } }

        /* HEADER */
        header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; position: sticky; top: 0; z-index: 50; background: rgba(5, 5, 8, 0.8); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(212, 175, 55, 0.1); }
        .brand-logo { font-family: var(--font-serif); font-weight: 700; font-size: 1.3rem; letter-spacing: 1px; color: var(--gold); display: flex; align-items: center; gap: 10px; }
        .header-actions { display: flex; gap: 20px; }
        .icon-btn { background: none; border: none; font-size: 1.3rem; cursor: pointer; opacity: 0.8; transition: 0.3s; }
        .icon-btn:hover { transform: scale(1.1); opacity: 1; text-shadow: 0 0 10px var(--gold); }

        /* BANNER */
        .wisdom-banner { margin: 20px 20px 10px 20px; padding: 20px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(212, 175, 55, 0.2); border-left: 3px solid var(--gold); border-radius: 12px; cursor: pointer; position: relative; overflow: hidden; }
        .banner-text { font-family: var(--font-serif); font-style: italic; font-size: 1rem; line-height: 1.5; color: #ddd; }
        .banner-author { display: block; margin-top: 8px; font-size: 0.75rem; text-transform: uppercase; color: var(--gold); text-align: right; letter-spacing: 1px; }

        /* LAYOUT */
        .container { padding: 0 20px 100px 20px; }
        .section-title { font-family: var(--font-serif); font-size: 1.2rem; color: var(--gold); margin: 30px 0 15px 0; border-bottom: 1px solid rgba(212, 175, 55, 0.1); padding-bottom: 5px; display: inline-block; }
        .mind-grid { display: flex; gap: 15px; }
        .mind-card { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 20px; text-align: center; cursor: pointer; transition: 0.3s; }
        .mind-card h3 { margin: 5px 0 0 0; font-family: var(--font-serif); font-weight: 300; font-size: 1.1rem; color: #fff; }
        .mind-card span { font-size: 1.8rem; display: block; text-shadow: 0 0 15px var(--gold-glow); }
        .mind-count { font-size: 0.75rem; color: var(--text-muted); margin-top: 5px; }

        /* TASKS */
        .task-group { margin-bottom: 15px; }
        .group-header { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; color: var(--text-muted); }
        .task-item { background: rgba(30, 30, 35, 0.6); border-bottom: 1px solid rgba(255,255,255,0.05); padding: 16px; display: flex; align-items: center; justify-content: space-between; transition: 0.2s; }
        .task-item.red { border-left: 3px solid #ff4444; }
        .task-item.yellow { border-left: 3px solid #ffbb00; }
        .task-item.green { border-left: 3px solid #00cc66; }
        .task-item.loop { border-left: 3px solid #888; background: rgba(255,255,255,0.03); }
        .task-item.marker { border-left: 3px solid var(--gold); background: rgba(212, 175, 55, 0.05); }
        .task-text { flex: 1; font-size: 1rem; padding: 0 12px; font-family: var(--font-ui); }
        .task-item.done { opacity: 0.4; text-decoration: line-through; filter: grayscale(100%); }
        .check-circle { width: 20px; height: 20px; border-radius: 50%; border: 1px solid var(--text-muted); cursor: pointer; }
        .empty-msg { text-align: center; padding: 20px; color: var(--text-muted); font-style: italic; font-family: var(--font-serif); font-size: 0.9rem; border: 1px dashed rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer; }

        /* FAB */
        .fab { position: fixed; bottom: 30px; right: 30px; width: 64px; height: 64px; border-radius: 50%; background: #111; color: var(--gold); border: 1px solid var(--gold); font-size: 32px; cursor: pointer; z-index: 90; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px var(--gold-glow); transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); animation: breathe 4s infinite ease-in-out; }
        .fab:hover { transform: scale(1.05); }
        .fab:active { animation: jelly 0.5s; }
        @keyframes breathe { 0%, 100% { box-shadow: 0 0 15px var(--gold-glow); } 50% { box-shadow: 0 0 30px rgba(212, 175, 55, 0.5); } }
        @keyframes jelly { 0% { transform: scale(1, 1); } 25% { transform: scale(0.9, 1.1); } 50% { transform: scale(1.1, 0.9); } 75% { transform: scale(0.95, 1.05); } 100% { transform: scale(1, 1); } }

        /* PAGES */
        .sub-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #08080a; z-index: 60; display: flex; flex-direction: column; transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1); }
        .sub-page.active { transform: translateX(0); }
        .sub-content { padding: 20px; flex: 1; overflow-y: auto; }
        .close-bar { width: 100%; padding: 15px; text-align: center; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; font-size: 0.8rem; opacity: 0.7; margin-top: auto; cursor: pointer;}

        /* TIMER */
        .timer-wrapper { flex: 1; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; position: absolute; top: 0; left: 0; height: 100%; }
        .zen-circle { width: 220px; height: 220px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: center; align-items: center; margin-bottom: 30px; position: relative; transition: all 0.5s; z-index: 10; }
        .zen-circle.active { animation: zen-breathe 8s infinite ease-in-out; border-color: var(--gold); background: radial-gradient(circle, rgba(212,175,55,0.1) 0%, rgba(0,0,0,0) 70%); }
        .timer-text { font-size: 4.5rem; font-family: var(--font-ui); font-weight: 200; color: #fff; text-shadow: 0 0 20px rgba(0,0,0,0.5); z-index: 11; }
        .timer-input-area { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 30px; z-index: 10; }
        .t-input { background: transparent; border: none; border-bottom: 1px solid var(--gold); color: white; font-size: 2.5rem; width: 80px; text-align: center; font-family: var(--font-ui); outline: none; padding-bottom: 5px; }
        @keyframes zen-breathe { 0% { transform: scale(1); box-shadow: 0 0 0 0 var(--gold-glow); } 40% { transform: scale(1.1); box-shadow: 0 0 60px 20px var(--gold-glow); } 100% { transform: scale(1); box-shadow: 0 0 0 0 var(--gold-glow); } }

        /* MODALS (Z-Index boosted to 3000) */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 3000; display: none; justify-content: center; align-items: flex-end; }
        .modal.active { display: flex; }
        .modal.center { align-items: center; padding: 20px; }
        .sheet { background: #15151a; width: 100%; padding: 30px 20px; border-top-left-radius: 24px; border-top-right-radius: 24px; border-top: 1px solid rgba(255,255,255,0.1); animation: slideUp 0.3s ease; }
        .card-modal { background: #15151a; border: 1px solid var(--gold); padding: 30px; border-radius: 16px; width: 100%; max-width: 400px; text-align: center; animation: popIn 0.3s ease; box-shadow: 0 0 40px rgba(0,0,0,0.5); }
        .pill-container { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px; }
        .pill { padding: 8px 16px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.2); color: var(--text-muted); font-size: 0.9rem; cursor: pointer; white-space: nowrap; }
        .pill.selected { background: var(--gold); color: black; border-color: var(--gold); font-weight: bold; }
        textarea { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 15px; border-radius: 12px; font-size: 1rem; font-family: var(--font-serif); resize: none; height: 120px; outline: none; margin-bottom: 20px; }
        .btn { width: 100%; padding: 15px; border-radius: 12px; border: none; font-weight: bold; font-size: 1rem; cursor: pointer; }
        .btn-primary { background: var(--text-main); color: black; }
        .btn-gold { background: var(--gold); color: black; }
        .btn-ghost { background: transparent; color: var(--text-muted); border: 1px solid rgba(255,255,255,0.1); }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .hidden { display: none !important; }
        
        /* INFO STYLES */
        .info-row { display: flex; align-items: center; margin-bottom: 16px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 12px; }
        .info-dot { width: 12px; height: 12px; border-radius: 50%; margin-right: 15px; flex-shrink: 0; }
        .info-icon { font-size: 1.2rem; margin-right: 15px; width: 12px; text-align: center; }
        .info-content h4 { margin: 0 0 4px 0; font-family: 'Rajdhani', sans-serif; font-size: 1.1rem; }
        .info-content p { margin: 0; font-size: 0.9rem; color: var(--text-muted); }
        
        /* WELCOME */
        .welcome-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px); z-index: 9999; display: none; justify-content: center; align-items: center; padding: 20px; opacity: 1; transition: opacity 0.6s ease; }
        .welcome-card { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; padding: 30px; text-align: center; max-width: 500px; width: 100%; color: white; box-shadow: 0 10px 30px rgba(0,0,0,0.5); animation: popIn 0.5s ease; }
        .enter-btn { background: white; color: black; border: none; padding: 15px 40px; font-size: 1.2rem; font-weight: bold; border-radius: 50px; cursor: pointer; margin-top: 20px; box-shadow: 0 0 20px rgba(255,255,255,0.4); animation: breathe 2s infinite; }
    </style>
</head>
<body>

    <div class="aurora-bg"><div class="aurora-blob blob-1"></div><div class="aurora-blob blob-2"></div><div class="aurora-blob blob-3"></div></div>
    <div id="fireflies" class="firefly-container"></div>
    <div id="welcome-overlay" class="welcome-overlay"><div class="welcome-card"><h2 style="font-family:'Rajdhani'; font-weight:700; letter-spacing:2px;">WELCOME</h2><p style="font-size:1.1rem; line-height:1.5; opacity:0.8;">Balance your tasks with mindfulness.<br>A space for clarity and action.</p><button class="enter-btn" onclick="closeWelcome()">Enter</button></div></div>

    <div id="home-view">
        <header>
            <div class="brand-logo"><span>MIND</span><span style="font-weight:300; color:var(--text-muted)">TASKS</span></div>
            <div class="header-actions">
                <button class="icon-btn" onclick="openInfo()">‚ÑπÔ∏è</button>
                <button class="icon-btn" onclick="openTimer()">‚åõ</button>
            </div>
        </header>

        <div class="wisdom-banner" onclick="showQuote()">
            <div id="banner-text" class="banner-text">Loading wisdom...</div>
            <span id="banner-author" class="banner-author"></span>
        </div>

        <div class="container">
            <div class="section-title">Inner Space</div>
            <div class="mind-grid">
                <div class="mind-card" onclick="openPage('loop')"><span>‚ûø</span><h3>Loop</h3><div class="mind-count" id="count-loop">0</div></div>
                <div class="mind-card" onclick="openPage('marker')"><span>‚úíÔ∏è</span><h3>Perma</h3><div class="mind-count" id="count-marker">0</div></div>
            </div>

            <div class="section-title">Action</div>
            <div class="task-group"><div class="group-header" style="color: #ff6b6b">üî• High Priority</div><div id="list-red"></div></div>
            <div class="task-group"><div class="group-header" style="color: #ffd93d">‚ö° Flow State</div><div id="list-yellow"></div></div>
            <div class="task-group"><div class="group-header" style="color: #6bcb77">üçÉ Gentle</div><div id="list-green"></div></div>
        </div>
        <button class="fab" onclick="openModal()">+</button>
    </div>

    <div id="loop-page" class="sub-page"><div class="sub-page-content"><header><button class="icon-btn" onclick="closePage()">‚Üê</button><div class="brand-logo">LOOPS</div><div></div></header><div class="sub-content"><p style="text-align:center; color:var(--text-muted); font-style:italic;">Traps for uninvited thoughts.</p><div id="page-list-loop"></div></div><div class="close-bar" onclick="closePage()">Return</div></div></div>
    <div id="marker-page" class="sub-page"><div class="sub-page-content"><header><button class="icon-btn" onclick="closePage()">‚Üê</button><div class="brand-logo">PERMA</div><div></div></header><div class="sub-content"><p style="text-align:center; color:var(--text-muted); font-style:italic;">Deep truths scribed permanently.</p><div id="page-list-marker"></div></div><div class="close-bar" onclick="closePage()">Return</div></div></div>

    <div id="timer-page" class="sub-page" style="background: #000;">
        <header style="z-index:100; background:transparent; border:none;"><button class="icon-btn" onclick="closeTimer()">‚úï</button><div></div><div></div></header>
        <div class="sub-page-content" style="justify-content: center; padding: 0;">
            <div class="timer-wrapper">
                <div class="zen-circle" id="breath-circle"><div class="timer-text" id="timer-display">05:00</div></div>
                <div class="timer-input-area" id="timer-setup"><input type="number" id="custom-min" class="t-input" value="5" min="1"> <span style="color:var(--text-muted); font-size: 1.2rem;">MINUTES</span></div>
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button class="btn btn-gold" style="padding: 15px 40px; border-radius: 50px;" id="timer-btn" onclick="startSequence()">Start Focus</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="modal-input"><div class="sheet"><div class="pill-container" id="category-pills"><div class="pill selected" onclick="setCat('red', this)">üî• High</div><div class="pill" onclick="setCat('yellow', this)">‚ö° Flow</div><div class="pill" onclick="setCat('green', this)">üçÉ Gentle</div><div class="pill" onclick="setCat('loop', this)">‚ûø Loop</div><div class="pill" onclick="setCat('marker', this)">‚úíÔ∏è Perma</div></div><textarea id="input-text" placeholder="Write here..."></textarea><div style="display:flex; gap:10px"><button class="btn btn-ghost" onclick="closeModal()">Cancel</button><button class="btn btn-primary" onclick="saveNote()">Save</button></div></div></div>
    <div class="modal center" id="modal-quote" onclick="if(event.target === this) closeQuote()"><div class="card-modal"><div style="font-size:2rem; margin-bottom:10px">üìú</div><div id="modal-quote-text" class="quote-text" style="font-size:1.2rem; font-style:italic; margin-bottom:15px; font-family:var(--font-serif); color:#fff;"></div><div id="modal-quote-author" class="quote-author" style="color:var(--gold); text-transform:uppercase; font-size:0.8rem; letter-spacing:1px;"></div><button class="btn btn-gold" style="margin-top:20px" onclick="closeQuote()">Absorb</button></div></div>
    <div class="modal center" id="modal-info" onclick="if(event.target === this) closeInfo()"><div class="card-modal" style="text-align: left;"><h3 style="text-align:center; color:var(--gold); margin-top:0; font-family:var(--font-serif)">Guide</h3><div class="info-row"><div class="info-dot" style="background: var(--aurora-pink); box-shadow: 0 0 8px var(--aurora-pink);"></div><div class="info-content"><h4>High Energy</h4><p>Urgent tasks. Do these when your energy is at its peak.</p></div></div><div class="info-row"><div class="info-dot" style="background: var(--aurora-blue); box-shadow: 0 0 8px var(--aurora-blue);"></div><div class="info-content"><h4>Flow State</h4><p>Important, steady work. Requires focus but not panic.</p></div></div><div class="info-row"><div class="info-dot" style="background: var(--aurora-green); box-shadow: 0 0 8px var(--aurora-green);"></div><div class="info-content"><h4>Gentle</h4><p>Low stakes. Do these when you need to relax or wind down.</p></div></div><hr style="opacity:0.2"><div class="info-row"><div class="info-icon">‚ûø</div><div class="info-content"><h4>Mental Loops</h4><p>Catch repetitive, unhelpful thoughts here to get them out of your head.</p></div></div><div class="info-row"><div class="info-icon" style="color: var(--aurora-purple)">‚úíÔ∏è</div><div class="info-content"><h4>Perma Truths</h4><p>Deep realizations or affirmations you want to keep forever.</p></div></div><button class="btn btn-ghost" style="margin-top:10px; width:100%" onclick="closeInfo()">Close</button></div></div>

    <script>
        /* CACHE KILLER */
        if ('serviceWorker' in navigator) { navigator.serviceWorker.getRegistrations().then(function(registrations) { for(let registration of registrations) { registration.unregister(); } }); }

        if (!localStorage.getItem('hasVisited')) { document.getElementById('welcome-overlay').style.display = 'flex'; }
        function closeWelcome() { localStorage.setItem('hasVisited', 'true'); document.getElementById('welcome-overlay').style.opacity = '0'; setTimeout(() => { document.getElementById('welcome-overlay').style.display = 'none'; }, 600); }

        let notes = JSON.parse(localStorage.getItem('auroraNotes')) || [];
        let currentCat = 'red';
        const library = [
            {t:"The wound is the place where the Light enters you.",a:"Rumi"},{t:"What you seek is seeking you.",a:"Rumi"},{t:"Stop acting so small. You are the universe in ecstatic motion.",a:"Rumi"},{t:"Silence is the language of God, all else is poor translation.",a:"Rumi"},{t:"Sell your cleverness and buy bewilderment.",a:"Rumi"},{t:"Knock, And He'll open the door.",a:"Rumi"},{t:"You were born with wings, why prefer to crawl through life?",a:"Rumi"},{t:"Don't be satisfied with stories, how things have gone with others. Unfold your own myth.",a:"Rumi"},{t:"I wish I could show you when you are lonely or in darkness the astonishing light of your own being.",a:"Hafiz"},{t:"Fear is the cheapest room in the house. I would like to see you living in better conditions.",a:"Hafiz"},{t:"The sun is within me, and so is the moon.",a:"Kabir"},{t:"Wherever you stand, be the soul of that place.",a:"Rumi"},{t:"Be empty of worrying. Think of who created thought.",a:"Rumi"},{t:"Your heart is the size of an ocean. Go find yourself in its hidden depths.",a:"Rumi"},{t:"Let yourself be silently drawn by the strange pull of what you really love. It will not lead you astray.",a:"Rumi"},{t:"Travel brings power and love back into your life.",a:"Rumi"},{t:"The mind creates the abyss, the heart crosses it.",a:"Nisargadatta Maharaj"},{t:"Wisdom is knowing I am nothing, Love is knowing I am everything.",a:"Nisargadatta Maharaj"},{t:"Everything happens on its own. You are doing nothing.",a:"Nisargadatta Maharaj"},{t:"Once you realize that the road is the goal and that you are always on the road, not to reach a goal, but to enjoy its beauty and its wisdom, life ceases to be a task and becomes natural and simple.",a:"Nisargadatta Maharaj"},
            {t:"Arise, awake, and stop not till the goal is reached.",a:"Swami Vivekananda"},{t:"You have to grow from the inside out. None can teach you, none can make you spiritual.",a:"Swami Vivekananda"},{t:"All power is within you; you can do anything and everything.",a:"Swami Vivekananda"},{t:"In a conflict between the heart and the brain, follow your heart.",a:"Swami Vivekananda"},{t:"Your own Self-Realization is the greatest service you can render the world.",a:"Ramana Maharshi"},{t:"Be as you are.",a:"Ramana Maharshi"},{t:"There is no greater mystery than this: that we keep seeking reality though in fact we are reality.",a:"Ramana Maharshi"},{t:"The degree of freedom from unwanted thoughts and the degree of concentration on a single thought are the measures to gauge spiritual progress.",a:"Ramana Maharshi"},{t:"Faith is the bird that feels the light when the dawn is still dark.",a:"Rabindranath Tagore"},{t:"Clouds come floating into my life, no longer to carry rain or usher storm, but to add color to my sunset sky.",a:"Rabindranath Tagore"},{t:"Let your life lightly dance on the edges of Time like dew on the tip of a leaf.",a:"Rabindranath Tagore"},{t:"Love is an endless mystery, for it has nothing else to explain it.",a:"Rabindranath Tagore"},{t:"Everything comes to us that belongs to us if we create the capacity to receive it.",a:"Rabindranath Tagore"},{t:"The butterfly counts not months but moments, and has time enough.",a:"Rabindranath Tagore"},{t:"The eye through which I see God is the same eye through which God sees me.",a:"Meister Eckhart"},{t:"If the only prayer you ever say in your entire life is thank you, it will be enough.",a:"Meister Eckhart"},
            {t:"Nature does not hurry, yet everything is accomplished.",a:"Lao Tzu"},{t:"To the mind that is still, the whole universe surrenders.",a:"Lao Tzu"},{t:"The journey of a thousand miles begins with a single step.",a:"Lao Tzu"},{t:"When I let go of what I am, I become what I might be.",a:"Lao Tzu"},{t:"Knowing others is intelligence; knowing yourself is true wisdom.",a:"Lao Tzu"},{t:"Peace comes from within. Do not seek it without.",a:"Buddha"},{t:"The mind is everything. What you think you become.",a:"Buddha"},{t:"Three things cannot be long hidden: the sun, the moon, and the truth.",a:"Buddha"},{t:"Start by doing what's necessary; then do what's possible; and suddenly you are doing the impossible.",a:"St. Francis of Assisi"},{t:"Preach the Gospel at all times. Use words if necessary.",a:"St. Francis of Assisi"},{t:"All shall be well, and all shall be well, and all manner of thing shall be well.",a:"Julian of Norwich"},{t:"Let nothing disturb you, let nothing frighten you. All things are passing away: God never changes.",a:"St. Teresa of Avila"},{t:"In the evening of life, we will be judged on love alone.",a:"St. John of the Cross"},{t:"Silence is God's first language.",a:"St. John of the Cross"},{t:"Simplicity is the ultimate sophistication.",a:"Leonardo da Vinci"},{t:"He who has a why to live can bear almost any how.",a:"Friedrich Nietzsche"},{t:"In the midst of winter, I found there was, within me, an invincible summer.",a:"Albert Camus"},{t:"Be the change that you wish to see in the world.",a:"Mahatma Gandhi"},{t:"Where there is love there is life.",a:"Mahatma Gandhi"},{t:"Live as if you were to die tomorrow. Learn as if you were to live forever.",a:"Mahatma Gandhi"},{t:"The weak can never forgive. Forgiveness is the attribute of the strong.",a:"Mahatma Gandhi"},{t:"If you want to know him, you must be him.",a:"Ibn Arabi"},{t:"Die before you die.",a:"Prophet Muhammad"},{t:"This place is a dream. Only a sleeper considers it real.",a:"Rumi"},{t:"The lion is most handsome when looking for food.",a:"Rumi"},{t:"Raise your words, not voice. It is rain that grows flowers, not thunder.",a:"Rumi"},
            {t:"Lovers don't finally meet somewhere. They're in each other all along.",a:"Rumi"},{t:"Seek the wisdom that will untie your knot. Seek the path that demands your whole being.",a:"Rumi"},{t:"Observe the wonders as they occur around you. Don't claim them. Feel the artistry moving through and be silent.",a:"Rumi"},{t:"Dance, when you're broken open. Dance, if you've torn the bandage off. Dance in the middle of the fighting.",a:"Rumi"},{t:"I count him braver who overcomes his desires than him who conquers his enemies; for the hardest victory is over self.",a:"Aristotle"},{t:"Knowing yourself is the beginning of all wisdom.",a:"Aristotle"},{t:"It is the mark of an educated mind to be able to entertain a thought without accepting it.",a:"Aristotle"},{t:"The unexamined life is not worth living.",a:"Socrates"},{t:"Wonder is the beginning of wisdom.",a:"Socrates"},{t:"To find yourself, think for yourself.",a:"Socrates"},{t:"He who is not contented with what he has, would not be contented with what he would like to have.",a:"Socrates"},{t:"Be kind, for everyone you meet is fighting a hard battle.",a:"Plato"},{t:"Wise men speak because they have something to say; Fools because they have to say something.",a:"Plato"},{t:"Courage is knowing what not to fear.",a:"Plato"},{t:"At the touch of love everyone becomes a poet.",a:"Plato"},{t:"You cannot shake hands with a clenched fist.",a:"Indira Gandhi"},{t:"Happiness is when what you think, what you say, and what you do are in harmony.",a:"Mahatma Gandhi"},{t:"The future depends on what you do today.",a:"Mahatma Gandhi"},{t:"I think, therefore I am.",a:"Ren√© Descartes"},{t:"That which does not kill us makes us stronger.",a:"Friedrich Nietzsche"},{t:"It does not matter how slowly you go as long as you do not stop.",a:"Confucius"},
            {t:"Real knowledge is to know the extent of one's ignorance.",a:"Confucius"},{t:"Everything has beauty, but not everyone sees it.",a:"Confucius"},{t:"Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.",a:"Buddha"},{t:"You, yourself, as much as anybody in the entire universe, deserve your love and affection.",a:"Buddha"},{t:"Health is the greatest gift, contentment the greatest wealth, faithfulness the best relationship.",a:"Buddha"},{t:"Your work is to discover your world and then with all your heart give yourself to it.",a:"Buddha"},{t:"Look deep into nature, and then you will understand everything better.",a:"Albert Einstein"},{t:"Imagination is more important than knowledge.",a:"Albert Einstein"},{t:"Life is like riding a bicycle. To keep your balance, you must keep moving.",a:"Albert Einstein"},{t:"Strive not to be a success, but rather to be of value.",a:"Albert Einstein"},{t:"I have no special talent. I am only passionately curious.",a:"Albert Einstein"},{t:"Peace cannot be kept by force; it can only be achieved by understanding.",a:"Albert Einstein"},{t:"In the middle of difficulty lies opportunity.",a:"Albert Einstein"},{t:"A person who never made a mistake never tried anything new.",a:"Albert Einstein"},{t:"We cannot solve our problems with the same thinking we used when we created them.",a:"Albert Einstein"},{t:"Only a life lived for others is a life worth living.",a:"Albert Einstein"},{t:"If you want to live a happy life, tie it to a goal, not to people or things.",a:"Albert Einstein"},{t:"Time is an illusion.",a:"Albert Einstein"},{t:"God does not play dice.",a:"Albert Einstein"},{t:"The true sign of intelligence is not knowledge but imagination.",a:"Albert Einstein"},{t:"Everything must be made as simple as possible. But not simpler.",a:"Albert Einstein"},{t:"Information is not knowledge.",a:"Albert Einstein"},{t:"Coincidence is God's way of remaining anonymous.",a:"Albert Einstein"},{t:"You cannot solve a problem with the same mind that created it.",a:"Albert Einstein"},{t:"Logic will get you from A to B. Imagination will take you everywhere.",a:"Albert Einstein"},{t:"The only source of knowledge is experience.",a:"Albert Einstein"},{t:"Learn from yesterday, live for today, hope for tomorrow.",a:"Albert Einstein"},
            {t:"It is not that I'm so smart. But I stay with the questions much longer.",a:"Albert Einstein"},{t:"Creativity is contagious. Pass it on.",a:"Albert Einstein"},{t:"The measure of intelligence is the ability to change.",a:"Albert Einstein"},{t:"Great spirits have always encountered violent opposition from mediocre minds.",a:"Albert Einstein"},{t:"Gravity is not responsible for people falling in love.",a:"Albert Einstein"},{t:"Anyone who has never made a mistake has never tried anything new.",a:"Albert Einstein"},{t:"A ship is always safe at shore but that is not what it‚Äôs built for.",a:"Albert Einstein"},{t:"Education is what remains after one has forgotten what one has learned in school.",a:"Albert Einstein"},{t:"If you can't explain it to a six year old, you don't understand it yourself.",a:"Albert Einstein"},{t:"The world is a dangerous place to live; not because of the people who are evil, but because of the people who don't do anything about it.",a:"Albert Einstein"},{t:"I live in that solitude which is painful in youth, but delicious in the years of maturity.",a:"Albert Einstein"},{t:"Once we accept our limits, we go beyond them.",a:"Albert Einstein"},{t:"The important thing is not to stop questioning.",a:"Albert Einstein"},{t:"Only two things are infinite, the universe and human stupidity, and I'm not sure about the former.",a:"Albert Einstein"},{t:"Reality is merely an illusion, albeit a very persistent one.",a:"Albert Einstein"},{t:"Peace is not merely the absence of war but the presence of justice.",a:"Martin Luther King Jr."},{t:"Darkness cannot drive out darkness; only light can do that. Hate cannot drive out hate; only love can do that.",a:"Martin Luther King Jr."},{t:"The time is always right to do what is right.",a:"Martin Luther King Jr."},{t:"In the end, we will remember not the words of our enemies, but the silence of our friends.",a:"Martin Luther King Jr."},{t:"Faith is taking the first step even when you don't see the whole staircase.",a:"Martin Luther King Jr."},{t:"Our lives begin to end the day we become silent about things that matter.",a:"Martin Luther King Jr."},{t:"Love is the only force capable of transforming an enemy into a friend.",a:"Martin Luther King Jr."},
            {t:"We must accept finite disappointment, but never lose infinite hope.",a:"Martin Luther King Jr."},{t:"Change does not roll in on the wheels of inevitability, but comes through continuous struggle.",a:"Martin Luther King Jr."},{t:"If you can't fly then run, if you can't run then walk, if you can't walk then crawl, but whatever you do you must keep moving forward.",a:"Martin Luther King Jr."},{t:"Life's most persistent and urgent question is, 'What are you doing for others?'",a:"Martin Luther King Jr."},{t:"I have decided to stick with love. Hate is too great a burden to bear.",a:"Martin Luther King Jr."},{t:"Nothing in the world is more dangerous than sincere ignorance and conscientious stupidity.",a:"Martin Luther King Jr."},{t:"We must learn to live together as brothers or perish together as fools.",a:"Martin Luther King Jr."},{t:"Forgiveness is not an occasional act, it is a constant attitude.",a:"Martin Luther King Jr."},{t:"Freedom is never voluntarily given by the oppressor; it must be demanded by the oppressed.",a:"Martin Luther King Jr."},{t:"The ultimate measure of a man is not where he stands in moments of comfort and convenience, but where he stands at times of challenge and controversy.",a:"Martin Luther King Jr."},{t:"Lightning makes no sound until it strikes.",a:"Martin Luther King Jr."},{t:"A lie cannot live.",a:"Martin Luther King Jr."},{t:"There comes a time when one must take a position that is neither safe, nor politic, nor popular, but he must take it because conscience tells him it is right.",a:"Martin Luther King Jr."},{t:"He who passively accepts evil is as much involved in it as he who helps to perpetrate it.",a:"Martin Luther King Jr."},{t:"We must build dikes of courage to hold back the flood of fear.",a:"Martin Luther King Jr."},{t:"The quality, not the longevity, of one's life is what is important.",a:"Martin Luther King Jr."}
        ];

        function init() {
            render();
            updateBanner();
            if ('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js');
        }

        // RENDER
        function render() {
            ['red', 'yellow', 'green'].forEach(c => {
                const container = document.getElementById(`list-${c}`);
                if(container) {
                    container.innerHTML = '';
                    const filtered = items.filter(i => i.cat === c);
                    if (filtered.length === 0) {
                        let msg = "Empty";
                        if(c === 'red') msg = "No fires. Tap + to add.";
                        if(c === 'yellow') msg = "Flow is clear. Tap + to add.";
                        if(c === 'green') msg = "Peaceful. Tap + to add.";
                        container.innerHTML = `<div class="empty-msg" onclick="openModal('${c}')">${msg}</div>`;
                    } else {
                        filtered.forEach(item => {
                            const div = document.createElement('div');
                            div.className = `task-item ${c} ${item.done ? 'done' : ''}`;
                            div.innerHTML = `<div class="check-circle" onclick="toggleDone(${item.id})"></div><div class="task-text">${item.text}</div><button class="icon-btn" style="font-size:0.9rem; opacity:0.5" onclick="deleteItem(${item.id})">‚úï</button>`;
                            container.appendChild(div);
                        });
                    }
                }
            });
            
            document.getElementById('count-loop').innerText = `${items.filter(i => i.cat === 'loop').length} Active`;
            document.getElementById('count-marker').innerText = `${items.filter(i => i.cat === 'marker').length} Truths`;

            if(activePage) {
                const container = document.getElementById(`page-list-${activePage}`);
                container.innerHTML = '';
                const filtered = items.filter(i => i.cat === activePage);
                if (filtered.length === 0) {
                    container.innerHTML = `<div class="empty-msg" onclick="openModal('${activePage}')">No entries yet.<br>Tap to add.</div>`;
                } else {
                    filtered.forEach(item => {
                        const div = document.createElement('div');
                        div.className = `task-item ${item.cat} ${item.done ? 'done' : ''}`;
                        div.innerHTML = `<div class="task-text">${item.text}</div><button class="icon-btn" style="font-size:0.9rem; opacity:0.5" onclick="deleteItem(${item.id})">‚úï</button>`;
                        container.appendChild(div);
                    });
                }
            }
        }

        // LOGIC
        function openModal(preSelectCat) {
            document.getElementById('modal-input').classList.add('active');
            document.getElementById('input-text').focus();
            if(preSelectCat) {
                const pills = document.querySelectorAll('.pill');
                pills.forEach(p => {
                    if(p.innerText.toLowerCase().includes(preSelectCat === 'red' ? 'high' : preSelectCat === 'yellow' ? 'flow' : preSelectCat === 'green' ? 'gentle' : preSelectCat === 'loop' ? 'loop' : 'perma')) {
                        setCategory(preSelectCat, p);
                    }
                });
            } else setCategory('red', document.querySelector('.pill'));
        }
        function closeModal() { document.getElementById('modal-input').classList.remove('active'); document.getElementById('input-text').value = ''; }

        function setCategory(cat, el) {
            currentCat = cat; const pills = document.querySelectorAll('.pill');
            pills.forEach(p => p.classList.remove('selected'));
            if(el) el.classList.add('selected');
            else {
                pills.forEach(p => {
                    if(p.innerText.toLowerCase().includes(cat === 'red' ? 'high' : cat === 'yellow' ? 'flow' : cat === 'green' ? 'gentle' : cat)) 
                        p.classList.add('selected');
                });
            }
        }

        function saveNote() {
            const text = document.getElementById('input-text').value.trim();
            if(!text) return;
            notes.push({ id: Date.now(), text, cat: currentCat, done: false });
            localStorage.setItem('auroraNotes', JSON.stringify(notes));
            if(activePage) openPage(activePage); else render();
            closeModal();
        }

        function deleteItem(id) {
            if(confirm("Dissolve this thought?")) {
                items = items.filter(i => i.id !== id);
                localStorage.setItem('auroraNotes', JSON.stringify(items));
                if(activePage) openPage(activePage); else render();
            }
        }

        function toggleDone(id) { const item = items.find(i => i.id === id); if(item) { item.done = !item.done; localStorage.setItem('auroraNotes', JSON.stringify(items)); render(); } }

        function openList(type) {
            activePage = type;
            const layer = document.getElementById('page-layer');
            const title = document.getElementById('page-title');
            if(type === 'loop') title.innerHTML = `<span class="logo-mind">MENTAL</span><div class="logo-dot"></div><span class="logo-tasks">LOOPS</span>`;
            else title.innerHTML = `<span class="logo-mind">PERMA</span><div class="logo-dot"></div><span class="logo-tasks">TRUTHS</span>`;
            layer.classList.add('active');
            render();
        }
        function closePage() { document.getElementById('page-layer').classList.remove('active'); activePage = null; render(); }

        // QUOTES
        function updateBanner() { const q = library[Math.floor(Math.random() * library.length)]; document.getElementById('banner-text').innerText = `"${q.t}"`; document.getElementById('banner-author').innerText = `- ${q.a}`; }
        function showQuote() { generateQuote(); document.getElementById('quote-modal').classList.add('active'); }
        function closeQuoteModal() { document.getElementById('quote-modal').classList.remove('active'); }
        function generateQuote() { const q = library[Math.floor(Math.random() * library.length)]; document.getElementById('modal-quote-text').innerText = q.t; document.getElementById('modal-quote-author').innerText = q.a; updateBanner(); }
        
        // INFO
        function openInfo() { document.getElementById('info-modal').classList.add('active'); }
        function closeInfo() { document.getElementById('info-modal').classList.remove('active'); }

        // TIMER & FIREFLIES
        function spawnFireflies() {
            const container = document.getElementById('fireflies'); container.classList.add('active'); container.innerHTML = '';
            for(let i=0; i<30; i++) {
                const fly = document.createElement('div'); fly.className = 'firefly';
                fly.style.left = Math.random() * 100 + 'vw'; fly.style.top = Math.random() * 100 + 'vh';
                fly.style.setProperty('--moveX', (Math.random() * 200 - 100) + 'px'); fly.style.setProperty('--moveY', (Math.random() * 200 - 100) + 'px');
                fly.style.animationDuration = (6 + Math.random() * 6) + 's'; fly.style.animationDelay = (Math.random() * 5) + 's';
                container.appendChild(fly);
            }
        }
        function clearFireflies() { document.getElementById('fireflies').classList.remove('active'); document.getElementById('fireflies').innerHTML = ''; }
        
        function playSound(type) {
            const AudioContext = window.AudioContext || window.webkitAudioContext; if (!AudioContext) return;
            const ctx = new AudioContext(); const osc = ctx.createOscillator(); const gain = ctx.createGain();
            osc.connect(gain); gain.connect(ctx.destination);
            if(type === 'ding') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(800, ctx.currentTime);
                gain.gain.setValueAtTime(0, ctx.currentTime); gain.gain.linearRampToValueAtTime(0.1, ctx.currentTime + 0.05); gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 1);
                osc.start(); osc.stop(ctx.currentTime + 1);
            } else {
                osc.type = 'sine'; osc.frequency.setValueAtTime(200, ctx.currentTime);
                gain.gain.setValueAtTime(0, ctx.currentTime); gain.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.1); gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 4);
                osc.start(); osc.stop(ctx.currentTime + 4);
            }
        }

        function openTimer() { document.getElementById('timer-layer').classList.add('active'); }
        function closeTimer() { document.getElementById('timer-layer').classList.remove('active'); resetTimer(); }

        function startSequence() {
            document.getElementById('timer-setup').classList.add('hidden'); document.getElementById('timer-btn').parentElement.style.display = 'none';
            const display = document.getElementById('timer-display');
            let count = 3; display.innerText = "Ready...";
            const countdown = setInterval(() => {
                if(count > 0) { playSound('ding'); display.innerText = count; count--; } 
                else { clearInterval(countdown); playSound('ding'); startActualTimer(); }
            }, 1000);
        }

        function startActualTimer() {
            const inputMin = parseInt(document.getElementById('custom-min').value) || 5; seconds = inputMin * 60;
            document.getElementById('breath-circle').classList.add('breathe'); spawnFireflies();
            document.getElementById('timer-btn').innerText = "Pause"; document.getElementById('timer-btn').parentElement.style.display = 'flex';
            isRunning = true;
            timerInt = setInterval(() => {
                if(seconds > 0) { seconds--; const m = Math.floor(seconds / 60); const s = seconds % 60; document.getElementById('timer-display').innerText = `${m < 10 ? '0':''}${m}:${s < 10 ? '0':''}${s}`; } 
                else { finishTimer(); }
            }, 1000);
        }

        function finishTimer() {
            clearInterval(timerInt); isRunning = false; document.getElementById('timer-display').innerText = "00:00";
            document.getElementById('breath-circle').classList.remove('breathe'); clearFireflies(); playSound('gong'); 
            alert("Focus Session Complete"); resetTimer();
        }

        function resetTimer() {
            clearInterval(timerInt); isRunning = false;
            document.getElementById('breath-circle').classList.remove('breathe'); document.getElementById('timer-setup').classList.remove('hidden');
            document.getElementById('timer-btn').parentElement.style.display = 'flex'; document.getElementById('timer-btn').innerText = "Start Focus";
            document.getElementById('timer-btn').onclick = startSequence;
            const inputMin = document.getElementById('custom-min').value; document.getElementById('timer-display').innerText = (inputMin < 10 ? "0" + inputMin : inputMin) + ":00";
            clearFireflies();
        }
        
        function toggleTimer() { if(!isRunning) startSequence(); }

        init();
    </script>
</body>
</html>
